(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}})();const h=async o=>{const s=await fetch(`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${o}?unitGroup=us&key=5NTMTJWBAFWASNAZSL9AT5W7W`);if(!s.ok)throw alert("Weather request failed or invalid location. Please try again."),new Error("Weather request failed");return await s.json()},d=async o=>{const e=await h(o),i=document.createElement("img"),s=e.currentConditions.icon.replace(/ /g,"_").toLowerCase();i.src=`https://raw.githubusercontent.com/VisualCrossing/WeatherIcons/main/PNG/1st%20Set%20-%20Color/${s}.png`,i.alt=e.currentConditions.conditions;const t=document.getElementById("current-icon");t.innerHTML="",t.appendChild(i);const n=document.getElementById("location");let r=e.resolvedAddress;/^-?\d+(\.\d+)?,-?\d+(\.\d+)?$/.test(r)?r=e.address||"Current Location":r=r.split(",").slice(0,2).join(", "),n.textContent=` ${r}`,document.getElementById("date").textContent=e.days[0].datetime,document.getElementById("hi-low").textContent=`High: ${e.days[0].tempmax}°F  Low: ${e.days[0].tempmin}°F`,document.getElementById("temperature").textContent=`Current Temperature: ${e.currentConditions.temp}°F`,document.getElementById("conditions").textContent=`Conditions: ${e.currentConditions.conditions}`;const p=document.getElementById("forecast-cards");p.innerHTML="",e.days.slice(1,8).forEach(c=>{const a=document.createElement("div");a.classList.add("forecast-card");const f=document.createElement("h3");f.textContent=new Date(c.datetime).toLocaleDateString("en-US",{weekday:"short"});const l=document.createElement("img"),y=c.icon.replace(/ /g,"_").toLowerCase();l.src=`https://raw.githubusercontent.com/VisualCrossing/WeatherIcons/main/PNG/1st%20Set%20-%20Color/${y}.png`,l.alt=c.conditions,a.appendChild(l);const u=document.createElement("p");u.classList.add("temp"),u.textContent=`${c.tempmax}° / ${c.tempmin}°`;const m=document.createElement("p");m.classList.add("conditions"),m.textContent=c.conditions,a.append(f,u,m),p.appendChild(a)})},E=()=>{if(!navigator.geolocation){d("New York");return}navigator.geolocation.getCurrentPosition(o=>{const e=o.coords.latitude,i=o.coords.longitude;d(`${e},${i}`)},()=>{d("New York")})},g=document.getElementById("user-form"),C=document.getElementById("city-input");g.addEventListener("submit",o=>{o.preventDefault();const e=C.value.trim();e&&(d(e),g.reset(),C.blur(),document.getElementById("submitButton").addEventListener("click",function(){document.activeElement&&document.activeElement.blur()}))});E();
